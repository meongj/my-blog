---
title: '[DHCP] Wi-Fi에 연결하면 어떻게 인터넷을 쓸 수 있을까?'
date: '2025-06-15 16:53'
description: '우리가 노트북이나 스마트폰으로 와이파이를 연결만 하면 바로 인터넷을 쓸 수 있다. 어떻게 노트북이나 스마트폰이 인터넷과 연결되는 것일까? 우리는 와이파이 비밀번호만 치면 끝이라고 생각하지만, 그 내부에서는 많은 일들이 일어난다. 인터넷을 쓰기 위한 정보를 받아야 하기 때문에 그걸 대신 해주는 녀석인 **DHCP**가 있다. DHCP가 어떤 일을 하고 어떤 과정을 거쳐 우리가 인터넷을 쓸 수 있는지 알아보자.'
section: 'Computer Science'
category: '네트워크'
slug: 'dhcp'
tags: ['dhcp', '네트워크', '라우터', '인터넷']
image: '/images/posts/post4/image.png'
---

## 시작하기

우리가 노트북이나 스마트폰으로 와이파이를 연결만 하면 바로 인터넷을 쓸 수 있다. 어떻게 노트북이나 스마트폰이 인터넷과 연결되는 것일까? 우리는 와이파이 비밀번호만 치면 끝이라고 생각하지만, 그 내부에서는 많은 일들이 일어난다. 인터넷을 쓰기 위한 정보를 받아야 하기 때문에 그걸 대신 해주는 녀석인 **DHCP**가 있다. DHCP가 어떤 일을 하고 어떤 과정을 거쳐 우리가 인터넷을 쓸 수 있는지 알아보자.

## DHCP 란?

인터넷을 쓰려면 내 기기는 반드시 **IP 주소**를 가져야 인터넷을 쓸 수 있다. 하지만, 우리는 인터넷을 연결할 때 매번 수동으로 IP주소를 입력하진 않는다. 그 과정을 대신 자동화해주는 녀석이 바로 **DHCP(Dynamic Host Configuration Protocol)** 이다.

**DHCP**는 네트워크에 접속하는 장치에게 네트워크 연결에 필요한 **IP주소, 서브넷 마스크, 게이트웨이, DNS 서버** 등 네트워크 설정 정보를 자동으로 할당해주는 프로토콜이다.

## DHCP 기능과 역할

만약 **DHCP** 없다면, 우리는 매번 네트워크에 접속할 때마다 다음 정보를 수동으로 입력해야 한다.

- **IP 주소** : 내 기기의 고유한 주소
- **서브넷 마스크** : 로컬/외부 네트워크를 나누는 기준
- **기본 게이트웨이** : 외부 네트워크로 나갈 때 사용하는 라우터 (일반적으로 공유기)
- **DNS 서버** : 도메인 이름을 IP로 변환해주는 서버

여기서 하나라도 잘못 입력하면 인터넷을 쓸 수 없고, IP 충돌 문제도 발생하게 된다. 매우 번거롭고 비효율적인 방법이다.

이런 과정을 **DHCP**가 대신 자동으로 처리해서 빠르고, 정확하게 인터넷을 쓸 수 있는 것이다.

## DHCP 동작 방식 (DORA 프로세스)

**DHCP** 는 다음과 같은 과정 **4단계 절차(DORA)** 를 거쳐 작동한다.

<img src="/images/posts/post4/dora.png" />

1. **Discover**  
   기기가 네트워크에 접속하면서 IP 주소를 달라고 네트워크 전체에 브로드 캐스트로 요청을 보낸다.

2. **Offer**  
   DHCP 서버가 사용 가능한 IP 주소와 설정 정보를 기기에게 전달한다.

3. **Request**  
   기기는 받은 IP 주소를 쓴다고 서버에게 요청한다.

4. **Acknowlege**  
   서버는 IP 주소를 써도 된다고 확정한다.

이러한 과정을 거쳐 호스트는 자동으로 **IP 주소 뿐만 아니라, 서브넷 마스크, 기본 게이트웨이, DNS 서버 주소**를 모두 받을 수 있다.

## DHCP는 IP를 임대(Lease) 해준다.

IP 주소를 받은 장치는 해당 주소를 **영구적으로** 사용하는 건 아니다. **임대 시간(Lease time)** 동안만 사용할 수 있다.

일반적으로 임대시간이 끝나기 절반이 지나면 기기는 자동으로 갱신 요청(Renew)를 보낸다. 그래서 계속 와이파이에 연결되어 있다면 자동으로 **DHCP가 갱신 요청**을 보내기 때문에 와이파이 연결이 끊기지 않는 것이다.

만약 장치가 네트워크 연결을 해제해도 DHCP 서버는 **IP를 다시 회수해서 다른 장치에게 재할당**을 할 수 있다. 이러한 방식은 **IP 자원의 낭비를 막고 네트워크 자원을 효율적으로 관리**하게 해준다.

## DHCP 동작 위치

```
[7] 애플리케이션 계층 → DHCP
↓
[4] 전송 계층 → UDP
↓
[3] 네트워크 계층 → IP
↓
[2] 데이터 링크 계층 → Ethernet (MAC 주소 활용)
↓
[1] 물리 계층
```

DHCP는 유저의 요청을 처리하기 위한 **응용 서비스**이기 때문에 OSI 7계층의 **애플리케이션 계층**에 위치해 있다. 실제 동작을 하기 위해서는 유저가 기기를 통해 인터넷 연결을 시작하는 **물리 계층부터 이더넷, IP, UDP, DHCP** 순서의 계층으로 동작한다.

빠르게 요청을 하고 응답을 해야하기 위해서 **연결 수립이 필요없는 UDP 프로토콜**을 사용한다.
보통은 **공유기 안에 DHCP 서버가 내장**되어 있고, **기업에서는 별도의 DHCP 서버**를 운영하기도 한다.

## 요약

- **DHCP는 인터넷 연결을 하기 위한 시작점**으로 네트워크 정보 설정을 자동으로 해주는 프로토콜이다.
- **DORA 프로세스**를 통해서 IP를 임시로 임대해주고, 갱신과 회수, 재할당까지 처리해준다.
- **OSI 7계층에서 애플리케이션 계층**에 속하고, **UDP 프로토콜**을 통해서 빠르게 통신이 가능하다.
